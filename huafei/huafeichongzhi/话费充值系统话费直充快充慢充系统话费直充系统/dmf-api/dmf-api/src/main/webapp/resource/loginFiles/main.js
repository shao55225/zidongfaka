!function(){function e(e,t){with(e)return eval(t)}window.Handlebars&&(window.Handlebars.registerHelper("eval",function(t,a){var n=t.fn(a);return e(t.data.root,n)}),window.Handlebars.registerHelper("if_even",function(e,t){return e%2==0?t.fn(this):t.inverse(this)}),window.Handlebars.registerHelper("loop",function(e,t){var a,n=t.hash.max;t.data&&(a=Handlebars.createFrame(t.data));for(var r=[],i=0;i<n;i++)a.index=i+1,r.push(t.fn(e[i],{data:a}));return r.join("")}),window.Handlebars.registerHelper("date",function(e,t){var a=t.hash.pattern;return formatDate(e,a)}),window.Handlebars.registerHelper("ifEquals",function(e,t,a){return e==t?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("pageNav",function(e,t){var a=e.pageNum,n=a-1,r=a+1,i=[];if(i.push("<ul class='pagination' style='display: inherit;padding: 0;margin: 0;'>"),e.hasPrev?i.push("<li><a data-page='"+n+'\' href="javascript:;">&lt;</a></li>'):i.push("<li><a disabled='disabled' href='javascript:;' class='disabled_pre'>&lt;</a></li>"),e.pageNum<3)for(var o=0;o<e.pageNum;o++)i.push("<li><a data-page='"+o+"' href='javascript:;'>"+(o+1)+"</a></li>");else i.push("<li><a data-page='"+(e.pageNum-2)+"' href='javascript:;'>"+(e.pageNum-1)+"</a></li>"),i.push("<li><a data-page='"+(e.pageNum-1)+"' href='javascript:;'>"+(e.pageNum-0)+"</a></li>");if(i.push("<li class=\"active\"><a href='javascript:;'>"+(e.pageNum+1)+"</a></li>"),e.pages-e.pageNum<=3)for(var o=e.pageNum+1;o<e.pages;o++)i.push("<li><a data-page='"+o+"' href='javascript:;'>"+(o+1)+"</a></li>");else i.push("<li><a data-page='"+(e.pageNum+1)+"' href='javascript:;'>"+(e.pageNum+2)+"</a></li>"),i.push("<li><a data-page='"+(e.pageNum+2)+"' href='javascript:;'>"+(e.pageNum+3)+"</a></li>");return e.hasNext?i.push("<li><a data-page='"+r+'\' href="javascript:;">&gt;</a></li>'):i.push("<li><a disabled='disabled' href='javascript:;' class='disabled_pre'>&gt;</a></li>"),i.push("</ul>"),i.join("")}))}(),function(){function e(e,t,a,n){var r=$(t);"text"==e||"html"==e||"val"==e?r[e](a):"attr"==e?"checked"==n||"disabled"==n||"selected"==n?r.prop(n,a):r.attr(n,a):"prop"==e&&r.prop(n,a)}function t(e,n,r){for(var i="data-bind-",o=e.attributes,s=0;s<o.length;s++){var l=o[s];if(0==l.name.indexOf(i)){var c,u=l.name.substring(i.length,l.name.length),f=u.indexOf("-");if(f>-1&&(c=u.substring(f+1,u.length),u=u.substring(0,f)),a[u]){var p=_evalWithContext(n,l.value);a[u](u,e,p,c)}}}if(!1!==r)for(var d=e.children,s=0;s<d.length;s++)t(d[s],n)}var a={text:e,html:e,val:e,attr:e,prop:e};window.bind=t}(),function(){function e(e){h();var t=$("#login_form"),a=function(){var e=t.find("input[type='password']").val(),a=new jsSHA("SHA-512","TEXT");return a.update(e+"MAGIC"),e=a.getHash("HEX"),t.find("input[name='password']").val(e),o(t.attr("action"),t.serialize(),function(e){if(params.appId){var t=!1;if($.each(e.apps||[],function(e,a){if(params.appId==a)return t=!0,!1}),!t)return void(window.location="/app-list.html")}location.reload()},function(e){t.find(".login-errorMsg").text(e.msg)}),!1};t.parsley?t.parsley({}).on("form:submit",a):t.submit(a),$("#_login").show()}function t(e){function t(e){$.each(e,function(e,r){if(n.push(e),$.isPlainObject(r)||$.isArray(r))t(r);else{for(var i="",o=0;o<n.length;o++){var s=n[o];i="number"==typeof s?i+"["+s+"]":""==i?s:i+"."+s}null!==r&&void 0!==r&&a.push({name:i,value:r})}n.pop()})}var a=[],n=[];return t(e),a}function a(e){var a=t(e),n=[];return $.each(a,function(e,t){n.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),n.join("&")}function n(e,t){"number"==typeof e&&(e=new Date(e)),t||(t="yyyy-MM-dd hh:mm:ss"),t=t.replace(/Y/g,"y").replace(/H/g,"h");var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}function r(t,n){"object"==typeof t?(n=t,t=n.url):n=n||{},!1!==n.processData&&n.data&&$.isPlainObject(n.data)&&(n.data=a(n.data));var r=n.success,i=n.error;n.method;return n.success=function(t){0==t.code?"function"==typeof r&&r(t.body):1==t.code?e(null):26==t.code?$("#_expire_notice").show():"function"==typeof i?i(t):t.msg&&window.layer&&window.layer.msg&&layer.msg(t.msg,function(){42==t.code&&(window.location="pay.html")})},n.error=null,$.ajax(_+("/"==t.charAt(0)?t:"/"+t),n)}function i(e,t,a,n){return"function"==typeof t&&(n=a,a=t,t=null),t=t||{},$.isPlainObject(t)?t._=(new Date).getTime():"string"==typeof t&&(t=t+"&_="+(new Date).getTime()),r(e,{method:"GET",data:t,success:a,error:n})}function o(e,t,a,n){return"function"==typeof t&&(n=a,a=t,t=null),r(e,{method:"POST",data:t,success:a,error:n})}function s(e){I||i("/keep-alive",function(){"function"==typeof e&&e(),I||(I=setInterval(function(){i("/keep-alive")},1e3*60))})}function l(){I&&(clearInterval(I),I=null)}function c(e,t,a){for(var n=0;n<a.length&&e>t;)n++,e/=t;return(e%1==0?e:e.toFixed(2))+a[n]}function u(e){return c(e,1024,["B","K","M","G"])}function f(e){return c(e,1024,["B/s","KB/s","MB/s","GB/s"])}function p(e,t,a){var n="/p-"+e;return a&&(n+="-"+a),t&&(n+="/"==t.charAt(0)?t:"/"+t),n}function d(){$("#_loading_mask").show()}function h(){$("#_loading_mask").hide()}function m(e){var t=new jsSHA("SHA-512","TEXT");return t.update(e+"MAGIC"),t.getHash("HEX")}function g(e,t){var a={};return $.each($(e).serializeArray(),function(e,n){var r=n.name,i=n.value;!1!==t&&(i=$.trim(i)),void 0===a[r]?a[r]=i:a[r]instanceof Array?a[r].push(i):(i=[a[r],i],a[r]=i)}),a}function v(e,t){if(!e||!(e=$.trim(e)))return null;var a=!0===t?/^([0-9a-zA-Z_\-]+):\/\/[^\/]+(\/.*)?/i:/^(http|https):\/\/[^\/]+(\/.*)?/i,n=a.exec(e);return n?(n[2]||(e+="/"),e):null}function b(e,t,a){var n=$("#_qr_container");n.length||(n=$('<div id="_qr_container"><p class="qr_title"></p><div class="qr_img"></div><p class="qr_url"></p>'),n.appendTo(document.body)),n.find(".qr_title").html(t),a&&n.find(".qr_url").html(a);new QRCode(n.find(".qr_img").empty()[0],{text:e,width:300,height:300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});layer.open({type:1,title:"",closeBtn:0,area:"400px",skin:"layui-layer-nobg",shadeClose:!0,content:n})}function y(e,t){var a=1;if(!t){t=[];for(var n=0;n<e.series.length;n++)t[n]=e.series[n].data}for(var r=0,i=t||[],o=i.length;r<o;r++)for(var s=0,l=i[r]||[],c=l.length;s<c;s++)a=l[s]>a?l[s]:a;return a+=5-a%5,e.yAxis.splitNumber=5,e.yAxis.max=a,e}function w(e,t){function a(){c&&clearTimeout(c),c=setTimeout(n,50)}function n(){var e,a=$(document).scrollTop()+t;u.each(function(){var t=$(this),n=$(t.attr("href"));if(n.length){var r=n.position().top;r<=a&&r+n.height()>a&&(e=t)}}),e&&r(e)}function r(e){!e||l&&e[0]==l[0]||(e.addClass("active"),l&&l.removeClass("active"),l=e)}function i(e){if(e=$(e),e.length){var n=$(e[0].hash);$(document).off("scroll",a),$("html, body").stop().animate({scrollTop:n.offset().top-t},300,"swing",function(){r(e),setTimeout(function(){$(document).on("scroll",a)},10)})}}function o(e){e.preventDefault(),i(this)}function s(e){(e=!!e)!=f&&(f=e,$(document)[f?"on":"off"]("scroll",a),u[f?"on":"off"]("click",o))}var l,c,u=$(e).find('a[href^="#"]'),f=!1;return t=t||2,{enable:s}}function x(e,t,a){function n(){e.daterangepicker({linkedCalendars:!1,opens:"left",ranges:o,startDate:o[a][0],endDate:o[a][1]},function(e,a,n){s(e,a,n),t()})}e=$(e),a=a||"所有时间";var r,i,o={"所有时间":[moment("20160101","YYYYMMDD"),moment()],"今天":[moment(),moment()],"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"最近七天":[moment().subtract(6,"days"),moment()],"最近30天":[moment().subtract(29,"days"),moment()]},s=function(t,a,n){var o="YYYY/MM/DD";r=t.format(o),i=a.format(o),e.find(".date-value").html("自由选取"==n?r+" - "+i:n)};n(),s(o[a][0],o[a][1],a),this.getRange=function(){return[r,i]},params.appId&&getAppInfo(function(e){o["所有时间"]=[moment(new Date(e.createTime)),moment()],n()})}function H(e,t){e=$(e);var a={},n={};e.find("[data-name]").each(function(e,t){var t=$(t),r=t.attr("data-name");(a[r]||(a[r]=[])).push(t),t.is(".active")&&(n[r]=t.attr("data-value"))}).click(function(){var e=$(this),r=e.attr("data-name"),i=e.attr("data-value");if(1==a[r].length){if("true"===e.attr("data-required"))return;e.toggleClass("active"),n[r]=e.is(".active")?i:null}else{if(e.is("active"))return;n[r]=i;for(var o=0;o<a[r].length;o++)a[r][o].removeClass("active");e.addClass("active")}t()}),this.getValues=function(){return $.extend({},n)}}function j(e){if(localStorage){var t=localStorage.getItem("event_"+e);if(t||""===t)return t.split(",")}return null}function A(e,t){if(localStorage){var a=null!=t?t.join(","):null;localStorage.setItem("event_"+e,a)}}var I,_="/cgi";!function(){function e(e,t){var a=this;this.container=$(e),this.options=t;for(var n=$("<ul/>").addClass("tab-form"),r=0;r<t.items.length;r++){var i=t.items[r];$("<li/>").data({target:i.target,disabled:i.disabled,name:i.name}).append($("<a/>").attr("href","#"+i.name).text(i.label)).appendTo(n)}this.container.addClass("tabs").empty().append(n),this.container.delegate("li","click",function(){a.select($(this).data("name"))})}e.prototype.select=function(e){var t;if(this.container.find("li").each(function(a,n){if($(n).data("name")==e)return t=n,!1}),t&&this.current!=t){this.current&&$($(this.current).data("pos",[$(document).scrollLeft(),$(document).scrollTop()]).removeClass("active").data("target")).hide(),$($(t).addClass("active").data("target")).show();var a=$(t).data("pos");a&&$(document).scrollLeft(a[0]).scrollTop(a[1]),this.current=t,window.location.hash=e,"function"==typeof this.options.onShow&&this.options.onShow.call(this,e)}},$.fn.extend({tabs:function(t){var a=location.hash;if(!a||a.length<2)a=t.items[0].name;else{var n=a.indexOf("?");a=a.substring(1,-1==n?a.length:n)}var r=new e(this,t);return r.select(a),r}})}();var N={new:"ZIXUN",society:"SHEJIAO",o2o:"DIANSHANG",game:"\tYOUXI",direct:"ZHIBO",sport:"YUNDONG",go:"CHUXING",tour:"\tLVYOU",tool:"\tGONGJU",other:"OTHER"},C={install:"TRACK",channel:"CHANNEL",link:"WAKEUP"};$(function(){$(document.body).delegate(".common-tip","click",function(){var e=$(this).attr("data-target");(e=e?$(e).html():$(this).find(".tip-content").html())&&layer.tips(e,this,{tips:[3,"#1bd1ab"],time:0,area:"300px",shade:.01,shadeClose:!0})})}),$.extend(window,{formatSize:u,formatSpeed:f,formatDate:n,keepAlive:s,stopAlive:l,ajaxReq:r,ajaxGet:i,ajaxPost:o,params:function(){var e={},t=location.href,a=t.lastIndexOf("?"),n=t.lastIndexOf("#");t&&a<t.length-1&&a>-1&&(t=t.substring(a+1,n>a?n:t.length),t.split("&").forEach(function(t){t=t.split("=");var a=t[0],n=t[1];if(void 0===e[a])e[a]=n;else{var r=e[a];r.length?r[r.length]=n:e[a]=[r,n]}}));var r=/^\/p-([^\/]*)/.exec(location.pathname);if(r){var i=r[1].split("-");i.length>0&&(e.appId=i[0])}return e}(),login:e,appPage:p,Type:N,ServiceType:C,serializeToString:a,serializeToArray:t,encrySHA:m,showLoading:d,hideLoading:h,serializeObject:g,normalizeUrl:v,showQRCode:b,resolveYSplit:y,setAjaxBaseUrl:function(e){_=e},autoScroll:w,getUserInfo:function(){function e(){t=$.Deferred(),i("/account/userinfo",{appId:params.appId},function(e){$(t.resolve(e))})}var t;return function(a,n){!n&&t||e(),"function"==typeof a&&t.done(a)}}(),getAppInfo:function(){function e(){t=$.Deferred(),i("/appinfo/get",{appId:params.appId},function(e){$(t.resolve(e))})}var t;return function(a,n){!n&&t||e(),t.done(a)}}(),ValuePicker:H,DatePicker:x,getSelectedEvents:j,saveSelectedEvents:A})}();